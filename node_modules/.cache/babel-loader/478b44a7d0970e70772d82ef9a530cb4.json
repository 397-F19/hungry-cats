{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hyung-soon/Documents/github/new-shopping-cart/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hyung-soon/Documents/github/new-shopping-cart/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hyung-soon/Documents/github/new-shopping-cart/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'rbx/index.css';import{Column,Container,Navbar,Button,Icon,Modal,Box}from'rbx';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faShoppingCart}from'@fortawesome/free-solid-svg-icons';import Product from'./Components/Card';import Cart from'./Components/Cart';var App=function App(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),cartActive=_useState4[0],setCart=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cartInfo=_useState6[0],setCartInfo=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),inventory=_useState8[0],setInventory=_useState8[1];useEffect(function(){var fetchInventory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('./data/items.json');case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;setInventory(json);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchInventory(){return _ref.apply(this,arguments);};}();fetchInventory();},[]);var inCart=function inCart(productId){for(i=0;i<cartInfo.length;i+=1){if(cartInfo[i].productId===productId){return i;}}return-1;};var useRenderUpdate=function useRenderUpdate(){var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),value=_useState10[0],set=_useState10[1];return function(){return set(function(value){return!value;});};};var renderUpdate=useRenderUpdate();var products=Object.values(data);var id2product={};var i;for(i=0;i<products.length;i+=1){id2product[products[i].sku]=products[i];}useEffect(function(){var fetchProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,json;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('./data/products.json');case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:json=_context2.sent;setData(json);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchProducts(){return _ref2.apply(this,arguments);};}();fetchProducts();},[]);var addCartItem=function addCartItem(productId,size){var index=inCart(productId);if(index!==-1){cartInfo[index][size]+=1;}else{cartInfo.push({productId:productId,product:id2product[productId],'S':0,'M':0,'L':0,'XL':0});cartInfo[cartInfo.length-1][size]+=1;}setCartInfo(cartInfo);setCart(true);renderUpdate();};var removeCartItem=function removeCartItem(productId,size){var index=inCart(productId);if(index!==-1){cartInfo[index][size]=cartInfo[index][size]>0?cartInfo[index][size]-1:0;}else{cartInfo.push({productId:productId,product:id2product[productId],'S':0,'M':0,'L':0,'XL':0});cartInfo[index][size]=cartInfo[index][size]>0?cartInfo[index][size]-1:0;}setCartInfo(cartInfo);renderUpdate();};var computeRemaining=function computeRemaining(productId){var index=inCart(productId);var remaining={'S':inventory[productId]?index===-1?inventory[productId]['S']:inventory[productId]['S']-cartInfo[index]['S']:0,'M':inventory[productId]?index===-1?inventory[productId]['M']:inventory[productId]['M']-cartInfo[index]['M']:0,'L':inventory[productId]?index===-1?inventory[productId]['L']:inventory[productId]['L']-cartInfo[index]['L']:0,'XL':inventory[productId]?index===-1?inventory[productId]['XL']:inventory[productId]['XL']-cartInfo[index]['XL']:0};return remaining;};return React.createElement(Container,{as:\"div\",style:{width:'100%',paddingTop:'20px'}},React.createElement(Navbar,{fixed:\"top\",as:\"div\",style:{paddingLeft:'60px',paddingRight:'50px',paddingTop:'10px'}},React.createElement(Navbar.Brand,null,React.createElement(Navbar.Item,null,React.createElement(\"h1\",{style:{fontSize:'24px'}},React.createElement(\"strong\",null,\"Catalog\"))),React.createElement(Navbar.Item,null,React.createElement(Button,{color:\"black\",onClick:function onClick(){return setCart(true);}},React.createElement(Icon,null,React.createElement(FontAwesomeIcon,{icon:faShoppingCart})))))),React.createElement(Modal,{active:cartActive},React.createElement(Modal.Background,null),React.createElement(Modal.Content,null,React.createElement(Box,null,React.createElement(Cart,{cartInfoContent:cartInfo,removeFromCart:removeCartItem}))),React.createElement(Modal.Close,{onClick:function onClick(){return setCart(false);}})),React.createElement(Column.Group,{multiline:true},React.createElement(Column,{size:\"full\"}),products.map(function(product){return React.createElement(Column,{size:\"one-third\"},React.createElement(Product,{product:product,addToCart:addCartItem,remaining:computeRemaining(product.sku)}));})));};export default App;","map":{"version":3,"sources":["/Users/hyung-soon/Documents/github/new-shopping-cart/src/App.js"],"names":["React","useEffect","useState","Column","Container","Navbar","Button","Icon","Modal","Box","FontAwesomeIcon","faShoppingCart","Product","Cart","App","data","setData","cartActive","setCart","cartInfo","setCartInfo","inventory","setInventory","fetchInventory","fetch","response","json","inCart","productId","i","length","useRenderUpdate","value","set","renderUpdate","products","Object","values","id2product","sku","fetchProducts","addCartItem","size","index","push","product","removeCartItem","computeRemaining","remaining","width","paddingTop","paddingLeft","paddingRight","fontSize","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport 'rbx/index.css';\nimport { Column, Container, Navbar, Button, Icon, Modal, Box } from 'rbx';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faShoppingCart } from '@fortawesome/free-solid-svg-icons';\nimport Product from './Components/Card';\nimport Cart from './Components/Cart';\n\nconst App = () => {\n  const [data, setData] = useState({});\n  const [cartActive, setCart] = useState(false);\n  const [cartInfo, setCartInfo] = useState([]);\n  const [inventory, setInventory] = useState({});\n\n  useEffect(() => {\n    const fetchInventory = async () => {\n      const response = await fetch('./data/items.json');\n      const json = await response.json();\n      setInventory(json);\n    };\n\n    fetchInventory();\n  }, []);\n\n  const inCart = (productId) => {\n    for (i = 0; i < cartInfo.length; i += 1) {\n      if (cartInfo[i].productId === productId) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  const useRenderUpdate = () => {\n    const [value, set] = useState(true);\n    return () => set(value => !value);\n  }\n  const renderUpdate = useRenderUpdate();\n\n  const products = Object.values(data);\n\n  const id2product = {}\n  let i;\n  for (i = 0; i < products.length; i += 1) {\n    id2product[products[i].sku] = products[i];\n  }\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      const response = await fetch('./data/products.json');\n      const json = await response.json();\n      setData(json);\n    };\n    fetchProducts();\n  }, []);\n\n  const addCartItem = (productId, size) => {\n    const index = inCart(productId);\n    if (index !== -1) {\n      cartInfo[index][size] += 1;\n    }\n    else {\n      cartInfo.push({\n        productId: productId,\n        product: id2product[productId],\n        'S': 0,\n        'M': 0,\n        'L': 0,\n        'XL': 0,\n      });\n      cartInfo[cartInfo.length - 1][size] += 1;\n    }\n    setCartInfo(cartInfo);\n    setCart(true);\n    renderUpdate();\n  };\n\n  const removeCartItem = (productId, size) => {\n    const index = inCart(productId);\n    if (index !== -1) {\n      cartInfo[index][size] = cartInfo[index][size] > 0 ? cartInfo[index][size] - 1 : 0;\n    }\n    else {\n      cartInfo.push({\n        productId: productId,\n        product: id2product[productId],\n        'S': 0,\n        'M': 0,\n        'L': 0,\n        'XL': 0,\n      });\n      cartInfo[index][size] = cartInfo[index][size] > 0 ? cartInfo[index][size] - 1 : 0;\n    }\n    setCartInfo(cartInfo);\n    renderUpdate();\n  };\n\n  const computeRemaining = (productId) => {\n    const index = inCart(productId);\n    const remaining = {\n      'S': inventory[productId] ? (index === -1 ? (inventory[productId]['S']) : (inventory[productId]['S'] - cartInfo[index]['S'])) : 0,\n      'M': inventory[productId] ? (index === -1 ? (inventory[productId]['M']) : (inventory[productId]['M'] - cartInfo[index]['M'])) : 0,\n      'L': inventory[productId] ? (index === -1 ? (inventory[productId]['L']) : (inventory[productId]['L'] - cartInfo[index]['L'])) : 0,\n      'XL': inventory[productId] ? (index === -1 ? (inventory[productId]['XL']) : (inventory[productId]['XL'] - cartInfo[index]['XL'])) : 0,\n    };\n    return remaining;\n  };\n\n  return (\n    <Container as='div' style={{ width: '100%', paddingTop: '20px' }}>\n      <Navbar fixed='top' as='div' style={{ paddingLeft: '60px', paddingRight: '50px', paddingTop: '10px' }}>\n        <Navbar.Brand>\n          <Navbar.Item>\n            <h1 style={{ fontSize: '24px' }}><strong>Catalog</strong></h1>\n          </Navbar.Item>\n          <Navbar.Item>\n            <Button color='black' onClick={() => setCart(true)}>\n              <Icon>\n                <FontAwesomeIcon icon={faShoppingCart} />\n              </Icon>\n            </Button>\n          </Navbar.Item>\n        </Navbar.Brand>\n      </Navbar>\n      <Modal active={cartActive}>\n        <Modal.Background />\n        <Modal.Content>\n          <Box>\n            <Cart cartInfoContent={cartInfo} removeFromCart={removeCartItem} />\n          </Box>\n        </Modal.Content>\n        <Modal.Close onClick={() => setCart(false)} />\n      </Modal>\n      <Column.Group multiline>\n        <Column size='full'>\n        </Column>\n        {products.map(product =>\n          <Column size='one-third'>\n            <Product product={product} addToCart={addCartItem} remaining={ computeRemaining(product.sku) } />\n          </Column>\n        )}\n      </Column.Group>\n    </Container>\n  );\n};\nexport default App;"]},"metadata":{},"sourceType":"module"}